{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "task": {
      "default": {
        "providers": {
          "enabled": ["local"],
          "default": "local"
        },
        "github": {
          "closeOnSuccess": false,
          "commentOnPrOpen": false
        },
        "linear": {
          "states": {
            "inProgress": "In Progress"
          }
        }
      },
      "type": "object",
      "properties": {
        "providers": {
          "default": {
            "enabled": ["local"],
            "default": "local"
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": ["local"],
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["linear", "github", "local"]
              }
            },
            "default": {
              "default": "local",
              "type": "string",
              "enum": ["linear", "github", "local"]
            }
          },
          "required": ["enabled", "default"],
          "additionalProperties": false
        },
        "github": {
          "default": {
            "closeOnSuccess": false,
            "commentOnPrOpen": false
          },
          "type": "object",
          "properties": {
            "closeOnSuccess": {
              "default": false,
              "type": "boolean"
            },
            "commentOnPrOpen": {
              "default": false,
              "type": "boolean"
            },
            "labelMapping": {
              "type": "object",
              "propertyNames": {
                "type": "string"
              },
              "additionalProperties": {
                "type": "string"
              }
            }
          },
          "required": ["closeOnSuccess", "commentOnPrOpen"],
          "additionalProperties": false
        },
        "linear": {
          "default": {
            "states": {
              "inProgress": "In Progress"
            }
          },
          "type": "object",
          "properties": {
            "states": {
              "default": {
                "inProgress": "In Progress"
              },
              "type": "object",
              "properties": {
                "inProgress": {
                  "default": "In Progress",
                  "type": "string"
                },
                "inReview": {
                  "type": "string"
                },
                "done": {
                  "type": "string"
                }
              },
              "required": ["inProgress"],
              "additionalProperties": false
            }
          },
          "required": ["states"],
          "additionalProperties": false
        }
      },
      "required": ["providers", "github", "linear"],
      "additionalProperties": false
    },
    "repo": {
      "default": {
        "defaultBranch": "main"
      },
      "type": "object",
      "properties": {
        "defaultBranch": {
          "default": "main",
          "type": "string"
        }
      },
      "required": ["defaultBranch"],
      "additionalProperties": false
    },
    "linear": {
      "default": {},
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        }
      },
      "additionalProperties": false
    },
    "github": {
      "default": {
        "reviewers": [],
        "requestCopilot": true,
        "review": {
          "requireApproval": false,
          "requiredApprovals": 1,
          "pollIntervalMs": 15000,
          "timeoutMs": 900000
        }
      },
      "type": "object",
      "properties": {
        "owner": {
          "type": "string"
        },
        "repo": {
          "type": "string"
        },
        "token": {
          "type": "string"
        },
        "reviewers": {
          "default": [],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "requestCopilot": {
          "default": true,
          "type": "boolean"
        },
        "baseBranch": {
          "type": "string"
        },
        "review": {
          "default": {
            "requireApproval": false,
            "requiredApprovals": 1,
            "pollIntervalMs": 15000,
            "timeoutMs": 900000
          },
          "type": "object",
          "properties": {
            "requireApproval": {
              "default": false,
              "type": "boolean"
            },
            "requiredApprovals": {
              "default": 1,
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "pollIntervalMs": {
              "default": 15000,
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "timeoutMs": {
              "default": 900000,
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "required": [
            "requireApproval",
            "requiredApprovals",
            "pollIntervalMs",
            "timeoutMs"
          ],
          "additionalProperties": false
        }
      },
      "required": ["reviewers", "requestCopilot", "review"],
      "additionalProperties": false
    },
    "verify": {
      "default": {
        "commands": [],
        "failFast": true,
        "autoFix": {
          "enabled": true,
          "maxAttempts": 2
        }
      },
      "type": "object",
      "properties": {
        "commands": {
          "default": [],
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "minLength": 1
              },
              "cmd": {
                "type": "string",
                "minLength": 1
              },
              "args": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            },
            "required": ["name", "cmd"],
            "additionalProperties": false
          }
        },
        "failFast": {
          "default": true,
          "type": "boolean"
        },
        "shell": {
          "type": "string"
        },
        "autoFix": {
          "default": {
            "enabled": true,
            "maxAttempts": 2
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "type": "boolean"
            },
            "maxAttempts": {
              "default": 2,
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "required": ["enabled", "maxAttempts"],
          "additionalProperties": false
        }
      },
      "required": ["commands", "failFast", "autoFix"],
      "additionalProperties": false
    },
    "naming": {
      "default": {
        "branchPrefix": "feature/",
        "worktreeDir": ".worktrees"
      },
      "type": "object",
      "properties": {
        "branchPrefix": {
          "default": "feature/",
          "type": "string"
        },
        "worktreeDir": {
          "default": ".worktrees",
          "type": "string"
        }
      },
      "required": ["branchPrefix", "worktreeDir"],
      "additionalProperties": false
    },
    "features": {
      "default": {
        "autoMode": false,
        "cognitionDefaults": false
      },
      "type": "object",
      "properties": {
        "autoMode": {
          "default": false,
          "type": "boolean"
        },
        "cognitionDefaults": {
          "default": false,
          "type": "boolean"
        }
      },
      "required": ["autoMode", "cognitionDefaults"],
      "additionalProperties": false
    },
    "state": {
      "default": {
        "mode": "global"
      },
      "type": "object",
      "properties": {
        "mode": {
          "default": "global",
          "type": "string",
          "enum": ["global", "repo"]
        },
        "root": {
          "type": "string"
        }
      },
      "required": ["mode"],
      "additionalProperties": false
    },
    "queue": {
      "default": {
        "priority": {
          "default": 5,
          "escalation": {
            "afterMinutes": 30,
            "stepMinutes": 30,
            "boost": 1,
            "max": 10
          },
          "tiers": {
            "highMin": 8,
            "mediumMin": 4
          }
        },
        "concurrency": {
          "default": 2,
          "tiers": {
            "high": 2,
            "medium": 1,
            "low": 1
          }
        }
      },
      "type": "object",
      "properties": {
        "priority": {
          "default": {
            "default": 5,
            "escalation": {
              "afterMinutes": 30,
              "stepMinutes": 30,
              "boost": 1,
              "max": 10
            },
            "tiers": {
              "highMin": 8,
              "mediumMin": 4
            }
          },
          "type": "object",
          "properties": {
            "default": {
              "default": 5,
              "type": "integer",
              "minimum": 1,
              "maximum": 10
            },
            "escalation": {
              "default": {
                "afterMinutes": 30,
                "stepMinutes": 30,
                "boost": 1,
                "max": 10
              },
              "type": "object",
              "properties": {
                "afterMinutes": {
                  "default": 30,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "stepMinutes": {
                  "default": 30,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "boost": {
                  "default": 1,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "max": {
                  "default": 10,
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10
                }
              },
              "required": ["afterMinutes", "stepMinutes", "boost", "max"],
              "additionalProperties": false
            },
            "tiers": {
              "default": {
                "highMin": 8,
                "mediumMin": 4
              },
              "type": "object",
              "properties": {
                "highMin": {
                  "default": 8,
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10
                },
                "mediumMin": {
                  "default": 4,
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 10
                }
              },
              "required": ["highMin", "mediumMin"],
              "additionalProperties": false
            }
          },
          "required": ["default", "escalation", "tiers"],
          "additionalProperties": false
        },
        "concurrency": {
          "default": {
            "default": 2,
            "tiers": {
              "high": 2,
              "medium": 1,
              "low": 1
            }
          },
          "type": "object",
          "properties": {
            "default": {
              "default": 2,
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "tiers": {
              "default": {
                "high": 2,
                "medium": 1,
                "low": 1
              },
              "type": "object",
              "properties": {
                "high": {
                  "default": 2,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "medium": {
                  "default": 1,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "low": {
                  "default": 1,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "required": ["high", "medium", "low"],
              "additionalProperties": false
            }
          },
          "required": ["default", "tiers"],
          "additionalProperties": false
        }
      },
      "required": ["priority", "concurrency"],
      "additionalProperties": false
    },
    "ui": {
      "default": {
        "worktrees": {
          "staleAfterDays": 7
        }
      },
      "type": "object",
      "properties": {
        "worktrees": {
          "default": {
            "staleAfterDays": 7
          },
          "type": "object",
          "properties": {
            "staleAfterDays": {
              "default": 7,
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "required": ["staleAfterDays"],
          "additionalProperties": false
        }
      },
      "required": ["worktrees"],
      "additionalProperties": false
    },
    "ai": {
      "default": {
        "models": {},
        "budgets": {
          "default": {},
          "plan": {},
          "execute": {},
          "review": {},
          "verify": {},
          "pr": {},
          "recovery": {}
        },
        "toolLimits": {},
        "cache": {
          "enabled": true
        },
        "sessions": {
          "persist": false
        },
        "cognition": {
          "provider": "anthropic",
          "fallbackProviders": [],
          "routing": {
            "enabled": true,
            "autoApply": true,
            "minSamples": 10,
            "maxLatencyDelta": 0.2,
            "lookbackDays": 30,
            "respectOverrides": true
          },
          "modelByTask": {}
        },
        "conversation": {
          "pruning": {
            "maxTurns": 80,
            "maxBytes": 200000,
            "summarizeAfterTurns": 30,
            "keepLastTurns": 20
          },
          "optimization": {
            "enabled": true,
            "retention": {
              "system": 6,
              "user": 12,
              "assistant": 8,
              "tool": 12,
              "error": 6,
              "correction": 6
            },
            "correctionPatterns": ["\\bactually\\b", "\\bcorrection\\b", "\\bupdate\\b"]
          }
        }
      },
      "type": "object",
      "properties": {
        "models": {
          "default": {},
          "type": "object",
          "properties": {
            "default": {
              "type": "string"
            },
            "plan": {
              "type": "string"
            },
            "execute": {
              "type": "string"
            },
            "review": {
              "type": "string"
            },
            "verify": {
              "type": "string"
            },
            "pr": {
              "type": "string"
            },
            "recovery": {
              "type": "string"
            }
          },
          "additionalProperties": false
        },
        "budgets": {
          "default": {
            "default": {},
            "plan": {},
            "execute": {},
            "review": {},
            "verify": {},
            "pr": {},
            "recovery": {}
          },
          "type": "object",
          "properties": {
            "default": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "plan": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "execute": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "review": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "verify": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "pr": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            },
            "recovery": {
              "default": {},
              "type": "object",
              "properties": {
                "maxTurns": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBudgetUsd": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "maxThinkingTokens": {
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "additionalProperties": false
            }
          },
          "required": [
            "default",
            "plan",
            "execute",
            "review",
            "verify",
            "pr",
            "recovery"
          ],
          "additionalProperties": false
        },
        "toolLimits": {
          "default": {},
          "type": "object",
          "properties": {
            "maxCalls": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "maxDurationMs": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "additionalProperties": false
        },
        "cache": {
          "default": {
            "enabled": true
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "type": "boolean"
            }
          },
          "required": ["enabled"],
          "additionalProperties": false
        },
        "sessions": {
          "default": {
            "persist": false
          },
          "type": "object",
          "properties": {
            "persist": {
              "default": false,
              "type": "boolean"
            }
          },
          "required": ["persist"],
          "additionalProperties": false
        },
        "cognition": {
          "default": {
            "provider": "anthropic",
            "fallbackProviders": [],
            "routing": {
              "enabled": true,
              "autoApply": true,
              "minSamples": 10,
              "maxLatencyDelta": 0.2,
              "lookbackDays": 30,
              "respectOverrides": true
            },
            "modelByTask": {}
          },
          "type": "object",
          "properties": {
            "provider": {
              "default": "anthropic",
              "type": "string",
              "enum": ["anthropic", "openai", "gemini"]
            },
            "fallbackProviders": {
              "default": [],
              "type": "array",
              "items": {
                "type": "string",
                "enum": ["anthropic", "openai", "gemini"]
              }
            },
            "routing": {
              "default": {
                "enabled": true,
                "autoApply": true,
                "minSamples": 10,
                "maxLatencyDelta": 0.2,
                "lookbackDays": 30,
                "respectOverrides": true
              },
              "type": "object",
              "properties": {
                "enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "autoApply": {
                  "default": true,
                  "type": "boolean"
                },
                "minSamples": {
                  "default": 10,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxLatencyDelta": {
                  "default": 0.2,
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "lookbackDays": {
                  "default": 30,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "respectOverrides": {
                  "default": true,
                  "type": "boolean"
                }
              },
              "required": [
                "enabled",
                "autoApply",
                "minSamples",
                "maxLatencyDelta",
                "lookbackDays",
                "respectOverrides"
              ],
              "additionalProperties": false
            },
            "modelByTask": {
              "default": {},
              "type": "object",
              "properties": {
                "kickoffPrompt": {
                  "type": "string"
                },
                "initDefaults": {
                  "type": "string"
                },
                "plan": {
                  "type": "string"
                },
                "reviewKickoff": {
                  "type": "string"
                },
                "reviewClassify": {
                  "type": "string"
                },
                "reviewCluster": {
                  "type": "string"
                },
                "localReview": {
                  "type": "string"
                },
                "ciTriage": {
                  "type": "string"
                },
                "verificationSummary": {
                  "type": "string"
                },
                "verificationFix": {
                  "type": "string"
                },
                "recovery": {
                  "type": "string"
                },
                "prDraft": {
                  "type": "string"
                },
                "learningNotes": {
                  "type": "string"
                },
                "conversationSummary": {
                  "type": "string"
                }
              },
              "additionalProperties": false
            }
          },
          "required": ["provider", "fallbackProviders", "routing", "modelByTask"],
          "additionalProperties": false
        },
        "conversation": {
          "default": {
            "pruning": {
              "maxTurns": 80,
              "maxBytes": 200000,
              "summarizeAfterTurns": 30,
              "keepLastTurns": 20
            },
            "optimization": {
              "enabled": true,
              "retention": {
                "system": 6,
                "user": 12,
                "assistant": 8,
                "tool": 12,
                "error": 6,
                "correction": 6
              },
              "correctionPatterns": ["\\bactually\\b", "\\bcorrection\\b", "\\bupdate\\b"]
            }
          },
          "type": "object",
          "properties": {
            "pruning": {
              "default": {
                "maxTurns": 80,
                "maxBytes": 200000,
                "summarizeAfterTurns": 30,
                "keepLastTurns": 20
              },
              "type": "object",
              "properties": {
                "maxTurns": {
                  "default": 80,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "maxBytes": {
                  "default": 200000,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "summarizeAfterTurns": {
                  "default": 30,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "keepLastTurns": {
                  "default": 20,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "required": [
                "maxTurns",
                "maxBytes",
                "summarizeAfterTurns",
                "keepLastTurns"
              ],
              "additionalProperties": false
            },
            "optimization": {
              "default": {
                "enabled": true,
                "retention": {
                  "system": 6,
                  "user": 12,
                  "assistant": 8,
                  "tool": 12,
                  "error": 6,
                  "correction": 6
                },
                "correctionPatterns": [
                  "\\bactually\\b",
                  "\\bcorrection\\b",
                  "\\bupdate\\b"
                ]
              },
              "type": "object",
              "properties": {
                "enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "retention": {
                  "default": {
                    "system": 6,
                    "user": 12,
                    "assistant": 8,
                    "tool": 12,
                    "error": 6,
                    "correction": 6
                  },
                  "type": "object",
                  "properties": {
                    "system": {
                      "default": 6,
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "user": {
                      "default": 12,
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "assistant": {
                      "default": 8,
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "tool": {
                      "default": 12,
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "error": {
                      "default": 6,
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    },
                    "correction": {
                      "default": 6,
                      "type": "integer",
                      "exclusiveMinimum": 0,
                      "maximum": 9007199254740991
                    }
                  },
                  "required": [
                    "system",
                    "user",
                    "assistant",
                    "tool",
                    "error",
                    "correction"
                  ],
                  "additionalProperties": false
                },
                "correctionPatterns": {
                  "default": ["\\bactually\\b", "\\bcorrection\\b", "\\bupdate\\b"],
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              "required": ["enabled", "retention", "correctionPatterns"],
              "additionalProperties": false
            }
          },
          "required": ["pruning", "optimization"],
          "additionalProperties": false
        }
      },
      "required": [
        "models",
        "budgets",
        "toolLimits",
        "cache",
        "sessions",
        "cognition",
        "conversation"
      ],
      "additionalProperties": false
    },
    "review": {
      "default": {
        "localGate": {
          "enabled": true,
          "blockPrOnFail": true,
          "runWhen": "beforeReviewRequest",
          "requireVerifyBeforePr": true,
          "thresholds": {
            "filesChangedWarn": 20,
            "linesChangedWarn": 1500
          },
          "severities": {},
          "allowConsoleLogPatterns": []
        },
        "aiReviewer": {
          "enabled": true
        },
        "intelligence": {
          "enabled": true,
          "severityPolicy": {
            "blocking": "actionable",
            "question": "actionable",
            "suggestion": "actionable",
            "nitpick": "actionable"
          },
          "nitpickAcknowledgement": "Noted - resolving as a nitpick for now.",
          "reviewerSuggestions": {
            "enabled": true,
            "useCodeowners": true,
            "useBlame": true,
            "maxSuggestions": 5,
            "autoRequest": false,
            "reviewerAliases": {}
          }
        }
      },
      "type": "object",
      "properties": {
        "maxIterations": {
          "type": "integer",
          "exclusiveMinimum": 0,
          "maximum": 9007199254740991
        },
        "localGate": {
          "default": {
            "enabled": true,
            "blockPrOnFail": true,
            "runWhen": "beforeReviewRequest",
            "requireVerifyBeforePr": true,
            "thresholds": {
              "filesChangedWarn": 20,
              "linesChangedWarn": 1500
            },
            "severities": {},
            "allowConsoleLogPatterns": []
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "type": "boolean"
            },
            "blockPrOnFail": {
              "default": true,
              "type": "boolean"
            },
            "runWhen": {
              "default": "beforeReviewRequest",
              "type": "string",
              "enum": ["beforePrOpen", "beforeReviewRequest", "both"]
            },
            "requireVerifyBeforePr": {
              "default": true,
              "type": "boolean"
            },
            "thresholds": {
              "default": {
                "filesChangedWarn": 20,
                "linesChangedWarn": 1500
              },
              "type": "object",
              "properties": {
                "filesChangedWarn": {
                  "default": 20,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                },
                "linesChangedWarn": {
                  "default": 1500,
                  "type": "integer",
                  "exclusiveMinimum": 0,
                  "maximum": 9007199254740991
                }
              },
              "required": ["filesChangedWarn", "linesChangedWarn"],
              "additionalProperties": false
            },
            "severities": {
              "default": {},
              "type": "object",
              "properties": {
                "diffstat": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "diffstatLines": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "configFiles": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "dependencyFiles": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "lockfile": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "envFile": {
                  "default": "blocker",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "consoleLog": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "debugger": {
                  "default": "blocker",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "todo": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "diffCheck": {
                  "default": "blocker",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "verifyFailed": {
                  "default": "blocker",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "verifyMissing": {
                  "default": "blocker",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "migration": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                },
                "branchNaming": {
                  "default": "warn",
                  "type": "string",
                  "enum": ["blocker", "warn", "info"]
                }
              },
              "additionalProperties": false
            },
            "allowConsoleLogPatterns": {
              "default": [],
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          },
          "required": [
            "enabled",
            "blockPrOnFail",
            "runWhen",
            "requireVerifyBeforePr",
            "thresholds",
            "severities",
            "allowConsoleLogPatterns"
          ],
          "additionalProperties": false
        },
        "aiReviewer": {
          "default": {
            "enabled": true
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "type": "boolean"
            }
          },
          "required": ["enabled"],
          "additionalProperties": false
        },
        "intelligence": {
          "default": {
            "enabled": true,
            "severityPolicy": {
              "blocking": "actionable",
              "question": "actionable",
              "suggestion": "actionable",
              "nitpick": "actionable"
            },
            "nitpickAcknowledgement": "Noted - resolving as a nitpick for now.",
            "reviewerSuggestions": {
              "enabled": true,
              "useCodeowners": true,
              "useBlame": true,
              "maxSuggestions": 5,
              "autoRequest": false,
              "reviewerAliases": {}
            }
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "type": "boolean"
            },
            "severityPolicy": {
              "default": {
                "blocking": "actionable",
                "question": "actionable",
                "suggestion": "actionable",
                "nitpick": "actionable"
              },
              "type": "object",
              "properties": {
                "blocking": {
                  "default": "actionable",
                  "type": "string",
                  "enum": ["actionable", "ignore", "auto_resolve"]
                },
                "question": {
                  "default": "actionable",
                  "type": "string",
                  "enum": ["actionable", "ignore", "auto_resolve"]
                },
                "suggestion": {
                  "default": "actionable",
                  "type": "string",
                  "enum": ["actionable", "ignore", "auto_resolve"]
                },
                "nitpick": {
                  "default": "actionable",
                  "type": "string",
                  "enum": ["actionable", "ignore", "auto_resolve"]
                }
              },
              "required": ["blocking", "question", "suggestion", "nitpick"],
              "additionalProperties": false
            },
            "nitpickAcknowledgement": {
              "default": "Noted - resolving as a nitpick for now.",
              "type": "string"
            },
            "reviewerSuggestions": {
              "default": {
                "enabled": true,
                "useCodeowners": true,
                "useBlame": true,
                "maxSuggestions": 5,
                "autoRequest": false,
                "reviewerAliases": {}
              },
              "type": "object",
              "properties": {
                "enabled": {
                  "default": true,
                  "type": "boolean"
                },
                "useCodeowners": {
                  "default": true,
                  "type": "boolean"
                },
                "useBlame": {
                  "default": true,
                  "type": "boolean"
                },
                "maxSuggestions": {
                  "default": 5,
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 9007199254740991
                },
                "autoRequest": {
                  "default": false,
                  "type": "boolean"
                },
                "reviewerAliases": {
                  "default": {},
                  "type": "object",
                  "propertyNames": {
                    "type": "string"
                  },
                  "additionalProperties": {
                    "type": "string"
                  }
                }
              },
              "required": [
                "enabled",
                "useCodeowners",
                "useBlame",
                "maxSuggestions",
                "autoRequest",
                "reviewerAliases"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "enabled",
            "severityPolicy",
            "nitpickAcknowledgement",
            "reviewerSuggestions"
          ],
          "additionalProperties": false
        }
      },
      "required": ["localGate", "aiReviewer", "intelligence"],
      "additionalProperties": false
    },
    "learning": {
      "default": {
        "enabled": true,
        "mode": "artifact",
        "ai": {
          "enabled": false
        },
        "autoApply": {
          "enabled": true,
          "threshold": 0.7,
          "minSamples": 3,
          "lookbackDays": 30,
          "maxHistory": 50
        },
        "targets": {
          "rules": "docs/rules.md",
          "skills": "docs/skills.md",
          "docs": "docs/learned.md"
        }
      },
      "type": "object",
      "properties": {
        "enabled": {
          "default": true,
          "type": "boolean"
        },
        "mode": {
          "default": "artifact",
          "type": "string",
          "enum": ["artifact", "apply"]
        },
        "ai": {
          "default": {
            "enabled": false
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": false,
              "type": "boolean"
            }
          },
          "required": ["enabled"],
          "additionalProperties": false
        },
        "autoApply": {
          "default": {
            "enabled": true,
            "threshold": 0.7,
            "minSamples": 3,
            "lookbackDays": 30,
            "maxHistory": 50
          },
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "type": "boolean"
            },
            "threshold": {
              "default": 0.7,
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "minSamples": {
              "default": 3,
              "type": "integer",
              "minimum": 0,
              "maximum": 9007199254740991
            },
            "lookbackDays": {
              "default": 30,
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            },
            "maxHistory": {
              "default": 50,
              "type": "integer",
              "minimum": 1,
              "maximum": 9007199254740991
            }
          },
          "required": [
            "enabled",
            "threshold",
            "minSamples",
            "lookbackDays",
            "maxHistory"
          ],
          "additionalProperties": false
        },
        "targets": {
          "default": {
            "rules": "docs/rules.md",
            "skills": "docs/skills.md",
            "docs": "docs/learned.md"
          },
          "type": "object",
          "properties": {
            "rules": {
              "default": "docs/rules.md",
              "type": "string"
            },
            "skills": {
              "default": "docs/skills.md",
              "type": "string"
            },
            "docs": {
              "default": "docs/learned.md",
              "type": "string"
            }
          },
          "additionalProperties": false
        }
      },
      "required": ["enabled", "mode", "ai", "autoApply", "targets"],
      "additionalProperties": false
    }
  },
  "required": [
    "task",
    "repo",
    "linear",
    "github",
    "verify",
    "naming",
    "features",
    "state",
    "queue",
    "ui",
    "ai",
    "review",
    "learning"
  ],
  "additionalProperties": false
}
